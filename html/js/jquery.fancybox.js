(function(a){var i,p,q,d,w,g,x,j,v,t,m=0,c={},k=[],l=0,b={},h=[],z=null,r=new Image,B=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,M=/[^\.]\.(swf)\s*$/i,C,D=1,s=0,o="",n,f,e=false,u=a.extend(a("<div/>")[0],{prop:0}),E=a.browser.msie&&a.browser.version<7&&!window.XMLHttpRequest,F=function(){p.hide();r.onerror=r.onload=null;z&&z.abort();i.empty()},G=function(){if(false===c.onError(k,m,c)){p.hide();e=false}else{c.titleShow=false;c.width="auto";c.height="auto";i.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');y()}},A=function(){var b=k[m],d,h,l,j,n,f;F();c=a.extend({},a.fn.fancybox.defaults,typeof a(b).data("fancybox")=="undefined"?c:a(b).data("fancybox"));f=c.onStart(k,m,c);if(f===false)e=false;else{if(typeof f=="object")c=a.extend(c,f);l=c.title||(b.nodeName?a(b).attr("title"):b.title)||"";if(b.nodeName&&!c.orig)c.orig=a(b).children("img:first").length?a(b).children("img:first"):a(b);if(l===""&&c.orig&&c.titleFromAlt)l=c.orig.attr("alt");d=c.href||(b.nodeName?a(b).attr("href"):b.href)||null;if(/^(?:javascript)/i.test(d)||d=="#")d=null;if(c.type){h=c.type;if(!d)d=c.content}else if(c.content)h="html";else if(d)h=d.match(B)?"image":d.match(M)?"swf":a(b).hasClass("iframe")?"iframe":d.indexOf("#")===0?"inline":"ajax";if(h){if(h=="inline"){b=d.substr(d.indexOf("#"));h=a(b).length>0?"inline":"ajax"}c.type=h;c.href=d;c.title=l;if(c.autoDimensions)if(c.type=="html"||c.type=="inline"||c.type=="ajax"){c.width="auto";c.height="auto"}else c.autoDimensions=false;if(c.modal){c.overlayShow=true;c.hideOnOverlayClick=false;c.hideOnContentClick=false;c.enableEscapeButton=false;c.showCloseButton=false}c.padding=parseInt(c.padding,10);c.margin=parseInt(c.margin,10);i.css("padding",c.padding+c.margin);a(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){a(this).replaceWith(g.children())});switch(h){case "html":i.html(c.content);y();break;case "inline":if(a(b).parent().is("#fancybox-content")===true){e=false;break}a('<div class="fancybox-inline-tmp" />').hide().insertBefore(a(b)).bind("fancybox-cleanup",function(){a(this).replaceWith(g.children())}).bind("fancybox-cancel",function(){a(this).replaceWith(i.children())});a(b).appendTo(i);y();break;case "image":e=false;a.fancybox.showActivity();r=new Image;r.onerror=function(){G()};r.onload=function(){e=true;r.onerror=r.onload=null;c.width=r.width;c.height=r.height;a("<img />").attr({id:"fancybox-img",src:r.src,alt:c.title}).appendTo(i);H()};r.src=d;break;case "swf":c.scrolling="no";j='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+c.width+'" height="'+c.height+'"><param name="movie" value="'+d+'"></param>';n="";a.each(c.swf,function(b,a){j+='<param name="'+b+'" value="'+a+'"></param>';n+=" "+b+'="'+a+'"'});j+='<embed src="'+d+'" type="application/x-shockwave-flash" width="'+c.width+'" height="'+c.height+'"'+n+"></embed></object>";i.html(j);y();break;case "ajax":e=false;a.fancybox.showActivity();c.ajax.win=c.ajax.success;z=a.ajax(a.extend({},c.ajax,{url:d,data:c.ajax.data||{},error:function(a){a.status>0&&G()},success:function(b,e,a){if((typeof a=="object"?a:z).status==200){if(typeof c.ajax.win=="function"){f=c.ajax.win(d,b,e,a);if(f===false){p.hide();return}else if(typeof f=="string"||typeof f=="object")b=f}i.html(b);y()}}}));break;case "iframe":H()}}else G()}},y=function(){var b=c.width,d=c.height;b=b.toString().indexOf("%")>-1?parseInt((a(window).width()-c.margin*2)*parseFloat(b)/100,10)+"px":b=="auto"?"auto":b+"px";d=d.toString().indexOf("%")>-1?parseInt((a(window).height()-c.margin*2)*parseFloat(d)/100,10)+"px":d=="auto"?"auto":d+"px";i.wrapInner('<div style="width:'+b+";height:"+d+";overflow: "+(c.scrolling=="auto"?"auto":c.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>');c.width=i.width();c.height=i.height();H()},H=function(){var r,y;p.hide();if(d.is(":visible")&&false===b.onCleanup(h,l,b)){a.event.trigger("fancybox-cancel");e=false}else{e=true;a(g.add(q)).unbind();a(window).unbind("resize.fb scroll.fb");a(document).unbind("keydown.fb");d.is(":visible")&&b.titlePosition!=="outside"&&d.css("height",d.height());h=k;l=m;b=c;if(b.overlayShow){q.css({"background-color":b.overlayColor,opacity:b.overlayOpacity,cursor:b.hideOnOverlayClick?"pointer":"auto",height:a(document).height()});if(!q.is(":visible")){E&&a("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});q.show()}}else q.hide();f=N();o=b.title||"";s=0;j.empty().removeAttr("style").removeClass();if(b.titleShow!==false){if(a.isFunction(b.titleFormat))r=b.titleFormat(o,h,l,b);else r=o&&o.length?b.titlePosition=="float"?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+o+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+b.titlePosition+'">'+o+"</div>":false;o=r;if(!(!o||o==="")){j.addClass("fancybox-title-"+b.titlePosition).html(o).appendTo("body").show();switch(b.titlePosition){case "inside":j.css({width:f.width-b.padding*2,marginLeft:b.padding,marginRight:b.padding});s=j.outerHeight(true);j.appendTo(w);f.height+=s;break;case "over":j.css({marginLeft:b.padding,width:f.width-b.padding*2,bottom:b.padding}).appendTo(w);break;case "float":j.css("left",parseInt((j.width()-f.width-40)/2,10)*-1).appendTo(d);break;default:j.css({width:f.width-b.padding*2,paddingLeft:b.padding,paddingRight:b.padding}).appendTo(d)}}}j.hide();if(d.is(":visible")){a(x.add(v).add(t)).hide();r=d.position();n={top:r.top,left:r.left,width:d.width(),height:d.height()};y=n.width==f.width&&n.height==f.height;g.fadeTo(b.changeFade,.3,function(){var d=function(){g.html(i.contents()).fadeTo(b.changeFade,1,I)};a.event.trigger("fancybox-change");g.empty().removeAttr("filter").css({"border-width":b.padding,width:f.width-b.padding*2,height:c.autoDimensions?"auto":f.height-s-b.padding*2});if(y)d();else{u.prop=0;a(u).animate({prop:1},{duration:b.changeSpeed,easing:b.easingChange,step:J,complete:d})}})}else{d.removeAttr("style");g.css("border-width",b.padding);if(b.transitionIn=="elastic"){n=L();g.html(i.contents());d.show();if(b.opacity)f.opacity=0;u.prop=0;a(u).animate({prop:1},{duration:b.speedIn,easing:b.easingIn,step:J,complete:I})}else{b.titlePosition=="inside"&&s>0&&j.show();g.css({width:f.width-b.padding*2,height:c.autoDimensions?"auto":f.height-s-b.padding*2}).html(i.contents());d.css(f).fadeIn(b.transitionIn=="none"?0:b.speedIn,I)}}}},O=function(){(b.enableEscapeButton||b.enableKeyboardNav)&&a(document).bind("keydown.fb",function(c){if(c.keyCode==27&&b.enableEscapeButton){c.preventDefault();a.fancybox.close()}else if((c.keyCode==37||c.keyCode==39)&&b.enableKeyboardNav&&c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.target.tagName!=="SELECT"){c.preventDefault();a.fancybox[c.keyCode==37?"prev":"next"]()}});if(b.showNavArrows){(b.cyclic&&h.length>1||l!==0)&&v.show();(b.cyclic&&h.length>1||l!=h.length-1)&&t.show()}else{v.hide();t.hide()}},I=function(){if(!a.support.opacity){g.get(0).style.removeAttribute("filter");d.get(0).style.removeAttribute("filter")}c.autoDimensions&&g.css("height","auto");d.css("height","auto");o&&o.length&&j.show();b.showCloseButton&&x.show();O();b.hideOnContentClick&&g.bind("click",a.fancybox.close);b.hideOnOverlayClick&&q.bind("click",a.fancybox.close);a(window).bind("resize.fb",a.fancybox.resize);b.centerOnScroll&&a(window).bind("scroll.fb",a.fancybox.center);b.type=="iframe"&&a('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(a.browser.msie?'allowtransparency="true""':"")+' scrolling="'+c.scrolling+'" src="'+b.href+'"></iframe>').appendTo(g);d.show();e=false;a.fancybox.center();b.onComplete(h,l,b);var f,i;if(h.length-1>l){f=h[l+1].href;if(typeof f!=="undefined"&&f.match(B)){i=new Image;i.src=f}}if(l>0){f=h[l-1].href;if(typeof f!=="undefined"&&f.match(B)){i=new Image;i.src=f}}},J=function(a){var c={width:parseInt(n.width+(f.width-n.width)*a,10),height:parseInt(n.height+(f.height-n.height)*a,10),top:parseInt(n.top+(f.top-n.top)*a,10),left:parseInt(n.left+(f.left-n.left)*a,10)};if(typeof f.opacity!=="undefined")c.opacity=a<.5?.5:a;d.css(c);g.css({width:c.width-b.padding*2,height:c.height-s*a-b.padding*2})},K=function(){return [a(window).width()-b.margin*2,a(window).height()-b.margin*2,a(document).scrollLeft()+b.margin,a(document).scrollTop()+b.margin]},N=function(){var d=K(),a={},f=b.autoScale,e=b.padding*2;a.width=b.width.toString().indexOf("%")>-1?parseInt(d[0]*parseFloat(b.width)/100,10):b.width+e;a.height=b.height.toString().indexOf("%")>-1?parseInt(d[1]*parseFloat(b.height)/100,10):b.height+e;if(f&&(a.width>d[0]||a.height>d[1]))if(c.type=="image"||c.type=="swf"){f=b.width/b.height;if(a.width>d[0]){a.width=d[0];a.height=parseInt((a.width-e)/f+e,10)}if(a.height>d[1]){a.height=d[1];a.width=parseInt((a.height-e)*f+e,10)}}else{a.width=Math.min(a.width,d[0]);a.height=Math.min(a.height,d[1])}a.top=parseInt(Math.max(d[3]-20,d[3]+(d[1]-a.height-40)*.5),10);a.left=parseInt(Math.max(d[2]-20,d[2]+(d[0]-a.width-40)*.5),10);return a},L=function(){var d=c.orig?a(c.orig):false,e={};if(d&&d.length){e=d.offset();e.top+=parseInt(d.css("paddingTop"),10)||0;e.left+=parseInt(d.css("paddingLeft"),10)||0;e.top+=parseInt(d.css("border-top-width"),10)||0;e.left+=parseInt(d.css("border-left-width"),10)||0;e.width=d.width();e.height=d.height();e={width:e.width+b.padding*2,height:e.height+b.padding*2,top:e.top-b.padding-20,left:e.left-b.padding-20}}else{d=K();e={width:b.padding*2,height:b.padding*2,top:parseInt(d[3]+d[1]*.5,10),left:parseInt(d[2]+d[0]*.5,10)}}return e},P=function(){if(p.is(":visible")){a("div",p).css("top",D*-40+"px");D=(D+1)%12}else clearInterval(C)};a.fn.fancybox=function(b){if(!a(this).length)return this;a(this).data("fancybox",a.extend({},b,a.metadata?a(this).metadata():{})).unbind("click.fb").bind("click.fb",function(b){b.preventDefault();if(!e){e=true;a(this).blur();k=[];m=0;b=a(this).attr("rel")||"";if(!b||b==""||b==="nofollow")k.push(this);else{k=a("a[rel="+b+"], area[rel="+b+"]");m=k.index(this)}A()}});return this};a.fancybox=function(b,f){var d;if(!e){e=true;d=typeof f!=="undefined"?f:{};k=[];m=parseInt(d.index,10)||0;if(a.isArray(b)){for(var c=0,g=b.length;c<g;c++)if(typeof b[c]=="object")a(b[c]).data("fancybox",a.extend({},d,b[c]));else b[c]=a({}).data("fancybox",a.extend({content:b[c]},d));k=jQuery.merge(k,b)}else{if(typeof b=="object")a(b).data("fancybox",a.extend({},d,b));else b=a({}).data("fancybox",a.extend({content:b},d));k.push(b)}if(m>k.length||m<0)m=0;A()}};a.fancybox.showActivity=function(){clearInterval(C);p.show();C=setInterval(P,66)};a.fancybox.hideActivity=function(){p.hide()};a.fancybox.next=function(){return a.fancybox.pos(l+1)};a.fancybox.prev=function(){return a.fancybox.pos(l-1)};a.fancybox.pos=function(a){if(!e){a=parseInt(a);k=h;if(a>-1&&a<h.length){m=a;A()}else if(b.cyclic&&h.length>1){m=a>=h.length?0:h.length-1;A()}}};a.fancybox.cancel=function(){if(!e){e=true;a.event.trigger("fancybox-cancel");F();c.onCancel(k,m,c);e=false}};a.fancybox.close=function(){function i(){q.fadeOut("fast");j.empty().hide();d.hide();a.event.trigger("fancybox-cleanup");g.empty();b.onClosed(h,l,b);h=c=[];l=m=0;b=c={};e=false}if(!(e||d.is(":hidden"))){e=true;if(b&&false===b.onCleanup(h,l,b))e=false;else{F();a(x.add(v).add(t)).hide();a(g.add(q)).unbind();a(window).unbind("resize.fb scroll.fb");a(document).unbind("keydown.fb");g.find("iframe").attr("src",E&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");b.titlePosition!=="inside"&&j.empty();d.stop();if(b.transitionOut=="elastic"){n=L();var k=d.position();f={top:k.top,left:k.left,width:d.width(),height:d.height()};if(b.opacity)f.opacity=1;j.empty().hide();u.prop=1;a(u).animate({prop:0},{duration:b.speedOut,easing:b.easingOut,step:J,complete:i})}else d.fadeOut(b.transitionOut=="none"?0:b.speedOut,i)}}};a.fancybox.resize=function(){q.is(":visible")&&q.css("height",a(document).height());a.fancybox.center(true)};a.fancybox.center=function(c){var a,f;if(!e){f=c===true?1:0;a=K();!f&&(d.width()>a[0]||d.height()>a[1])||d.stop().animate({top:parseInt(Math.max(a[3]-20,a[3]+(a[1]-g.height()-40)*.5-b.padding)),left:parseInt(Math.max(a[2]-20,a[2]+(a[0]-g.width()-40)*.5-b.padding))},typeof c=="number"?c:200)}};a.fancybox.init=function(){if(!a("#fancybox-wrap").length){a("body").append(i=a('<div id="fancybox-tmp"></div>'),p=a('<div id="fancybox-loading"><div></div></div>'),q=a('<div id="fancybox-overlay"></div>'),d=a('<div id="fancybox-wrap"></div>'));w=a('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(d);w.append(g=a('<div id="fancybox-content"></div>'),x=a('<a id="fancybox-close"></a>'),j=a('<div id="fancybox-title"></div>'),v=a('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),t=a('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));x.click(a.fancybox.close);p.click(a.fancybox.cancel);v.click(function(b){b.preventDefault();a.fancybox.prev()});t.click(function(b){b.preventDefault();a.fancybox.next()});a.fn.mousewheel&&d.bind("mousewheel.fb",function(b,c){if(e)b.preventDefault();else if(a(b.target).get(0).clientHeight==0||a(b.target).get(0).scrollHeight===a(b.target).get(0).clientHeight){b.preventDefault();a.fancybox[c>0?"prev":"next"]()}});a.support.opacity||d.addClass("fancybox-ie");if(E){p.addClass("fancybox-ie6");d.addClass("fancybox-ie6");a('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(w)}}};a.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:.7,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};a(document).ready(function(){a.fancybox.init()})})(jQuery);

